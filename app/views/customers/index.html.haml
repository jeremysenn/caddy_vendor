.container
  %br
  - if params[:balances].blank?
    %p
      = form_tag customers_path, id: 'customers_form', method: 'get', class: 'form-inline' do |f|
        .input-group
          = search_field_tag :q, params[:q], :placeholder => "Search members", class: "form-control input-lg", autofocus: true
          %span.input-group-btn
            %button.btn.btn-secondary{id: 'member_search_button', :type => "submit", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i>"}} 
              %i.fa.fa-search
        %small.text-muted Search by first name, last name, or member number.

    %p= link_to 'New member', new_customer_path, class: 'btn btn-primary'

  .card.card-block
    %h4.card-title 
      %i.fa.fa-user-circle-o
      Members
    - unless @members.blank?
      .table-responsive
        %table.table
          %thead
            %tr
              %th Name
              %th Phone
              %th Member #
              %th Active
              %th Balance
              %th
          %tbody
            - @members.each do |member|
              %tr{class: "#{member.primary? ? 'table-active' : ''}"}
                %td= member.full_name
                %td= member.PhoneMobile
                %td= "#{member.member_number.blank? ? 'None' : member.member_number}"
                %td= "#{member.active? ? 'Yes' : 'No'}"
                %td= "#{member.account.blank? ? 'N/A' : number_to_currency(member.account.balance)}"
                %td
                  %a{href: customer_path(member), class: 'btn btn-secondary', "data-turbolinks" => "false",  data: { disable_with: "<i class='fa fa-spinner fa-spin'></i> More..." }}
                    %i.fa.fa-user-circle-o
                    More...
                  %a{href: edit_customer_path(member), class: 'btn btn-primary', "data-turbolinks" => "false",  data: { disable_with: "<i class='fa fa-spinner fa-spin'></i> Edit" }}
                    %i.fa.fa-edit
                    Edit
    - else
      %p.lead No members found

    = paginate @members
  = link_to 'New member', new_customer_path, class: 'btn btn-primary' if params[:balances].blank?