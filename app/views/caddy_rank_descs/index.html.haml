.container
  %br
  %h3 Caddy Ranks
  %br

  - @caddy_rank_descs.group_by{|crd| crd.club}.each do |club, caddy_rank_descs|
    .card.card-block
      %h4.card-title= link_to club.name, club
      .table-responsive
        %table.table.table-striped
          %thead
            %tr
              %th Ranking
              %th Description
              %th
          %tbody
            - caddy_rank_descs.each do |caddy_rank_desc|
              %tr
                %td= caddy_rank_desc.RankingAcronym
                %td= caddy_rank_desc.RankingDescription
                %td
                  = link_to 'Show', caddy_rank_desc, class: 'btn btn-secondary'
                  = link_to 'Edit', edit_caddy_rank_desc_path(caddy_rank_desc), class: 'btn btn-primary'
                  - if caddy_rank_desc.caddies.blank? and caddy_rank_desc.caddy_pay_rates.blank?
                    = link_to 'Delete', caddy_rank_desc, :method => :delete, class: 'btn btn-danger', :data => { :confirm => 'Are you sure?' }
                  - else
                    %button.btn.btn-danger{"data-content" => "You must first remove this Caddy Rank from all Caddies and Caddy Pay Rates.", "data-toggle" => "popover", :title => "Delete Caddy Rank", "data-placement" => "top", :type => "button"} Delete

      .card-link= link_to "New #{club.name} caddy rank desc", new_caddy_rank_desc_path(club_id: club.id), class: 'btn btn-primary'